#!/bin/bash
#SBATCH --job-name=basketball_yolo_train
#SBATCH --partition=gpu
#SBATCH --gres=gpu:1
#SBATCH --cpus-per-task=4
#SBATCH --mem=24G
#SBATCH --time=48:00:00
#SBATCH --output=training_notebook/slurm_train.out

# ç§»å‹•åˆ°æäº¤ä½œæ¥­çš„ç›®éŒ„
cd $SLURM_SUBMIT_DIR

# è¼‰å…¥ Anaconda ä¸¦å•Ÿç”¨ yolov8 ç’°å¢ƒï¼ˆè«‹ç¢ºèªå·²å®‰è£å¥½ï¼‰
module load anaconda3/2022.10
source ~/miniconda3/etc/profile.d/conda.sh
conda activate yolov8

# Player æ¨¡å‹è¨“ç·´
echo "ğŸ½ é–‹å§‹è¨“ç·´ player detector..."
python training_notebook/basketball_player_detection_training.py

# Ball æ¨¡å‹è¨“ç·´
echo "ğŸ€ é–‹å§‹è¨“ç·´ ball detector..."
python training_notebook/basketball_ball_training.py

# Court Keypoint æ¨¡å‹è¨“ç·´
echo "ğŸŸ© é–‹å§‹è¨“ç·´ court keypoint pose..."
python training_notebook/basketball_court_keypoint_training.py

echo "âœ… å…¨éƒ¨è¨“ç·´å®Œæˆï¼Œè«‹ç¢ºèª training_notebook å…§ best.pt æ¨¡å‹æ˜¯å¦ç”¢ç”Ÿ"